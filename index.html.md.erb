---
title: Configuring the Metric Registrar
owner: registrar
---

This topic describes the Metric Registrar for Pivotal Application Service (PAS). It also includes information about enabling and configuring the Metric Registrar. 

## <a id="overview"></a> Overview 

The Metric Registrar allows app developers to export custom app metrics in a format that Loggregator can consume. App developers can then use the custom metrics to monitor apps with PCF Metrics and configure autoscaling rules with PCF Autoscaler. 

App developers can export custom metrics to Loggregator by configuring their apps in one of the following ways:

* **Metrics Endpoint---**Publish and register a Prometheus Exposition metrics endpoint to an app. The Metric Registrar will then poll this endpoint every 35 seconds and convert the metrics found in the response to Loggregator metrics. 
* **Structured Log---**Modify your app to emit metrics using a specific JSON or DogStatsD format. The Metric Registrar then converts all matching log messages into Loggregator metrics or events.

For more information about installing the Metric Registrar Plugin and registering your app, see [Emitting Custom App Metrics to the Metric Registrar](./using.html).

For more information about the components and products mentioned, see the following:
- [Loggregator](https://docs.pivotal.io/pivotalcf/loggregator/architecture.html)
- [PCF Metrics](https://docs.pivotal.io/pcf-metrics)
- [PCF Autoscaler](https://docs.pivotal.io/pivotalcf/appsman-services/autoscaler/using-autoscaler.html)

## <a id="architecture"></a> Architecture 

The following diagram illustrates how the Metric Registrar sends your custom app metrics to Loggregator. The components of the Metric Registrar are as follows:

* The cf CLI plugin 
* The `metric_registrar_endpoint_worker` and `metric_registrar_log_worker` jobs running on the Doppler VM of the PAS deployment
* The `metric_registrar_orchestrator` and `metric_registrar_smoke_test` jobs running on the Clock Global VM of the PAS deployment

<%# To edit the image, see https://docs.google.com/drawings/d/1A-1bwP3TuHtEDEg1I_68C3VsEKuCITNWDE-oVB9S0HU/edit?usp=sharing %>
<a target="_blank" href="./images/metrics-registrar-architecture.png"><img src="./images/metrics-registrar-architecture.png" alt="Metric Registrar Architecture Diagram"></a>

Click the image for a larger representation.


## <a id="configure"></a> Configure the Metric Registrar 

The PAS tile includes a configuration pane for the Metric Registrar. You can configure the Metric Registrar in the following ways:

* Enable
* Edit default scraping interval
* Add blacklisted tags

### <a id="disable"></a> Enable the Metric Registrar

The PAS tile does not deploy the Metric Registrar by default. To enable the Metric Registrar, uncheck the **Disable Metric Registrar** checkbox. 

### <a id="scraping-interval"></a> Edit Default Scraping Interval

The scraping interval defines how often the Metric Registrar polls custom metric endpoints. The default is 35 seconds. To change the scraping interval, edit the **Endpoint Scraping Interval** field. 

### <a id="blacklisted-tags"></a> Add Blacklisted Tags

To prevent the Metric Registrar from consuming the value of a metric or event tag, you can add the tag to the **Blacklisted Tags** field. For example, if you tag your metrics with a `customer_id`, you may want to add `customer_id` to the list of blacklisted tags. The field accepts a comma-separated list.

By default, the following tags are blacklisted to prevent interference with other products like PCF Metrics that use and rely on such tags.  

- `deployment`
- `job`
- `index`
- `id`
